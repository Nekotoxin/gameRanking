{% extends 'base.html' %}
{% block header %}
{% endblock %}
{% block content %}

<div id="mainpageBox">
    <div class="gameRankList">
        <h1 id="list1">å…¨éƒ¨æ¸¸æˆ</h1>
        <!-- ä¸€æ¡æ¨ªçº¿ -->

        {% for game in games %}
        <div id="aGame" class="animate__animated animate__bounceInUp">
            <!-- <a href="{{url_for('gamepage.gamepage',game_id=game['game_id'])}}"> -->
            <a href="{{url_for('gamepage.gamepage',game_id=game['game_id'])}}">
                <img id="gameCover"
                    src="{{url_for('static',filename='/gameMaterialStock/'~game['game_id']~'/game_cover.jpg')}}" alt="">
            </a>

            <div id="gameTextBox">
                <p id="gamerank">Rank {{loop.index}}</p>
                <!-- collect button -->
               
                <a href="{{url_for('gamepage.gamepage',game_id=game['game_id'])}}">
                    <p class="animate__animated animate__bounce" id="gameTitle" class="animate__headShake"> {{game['game_title']}}</p>
                    <!-- <h1 class="animate__animated animate__bounce">An animated element</h1> -->
                </a>
            </div>
            <!-- show game_update_time æ—¥æœŸåªæ˜¾ç¤ºå¹´æœˆæ—¥éƒ¨åˆ† -->
            <p id="gameUpdateTime">update time:{{game['game_update_time'].year}}å¹´{{game['game_update_time'].month}}æœˆ{{game['game_update_time'].day}}æ—¥</p>
            <div class="collectButton">
                <button onclick="collect('{{game.game_id}}')"  class="btn btn-primary" type="button" value="{{game.game_id}}">
                    ğŸ˜˜
                </button>
            </div>            
        </div>
        <div id="gameSeparate"></div>
        {% endfor %}
    </div>

    <script>

        function collect(game_id) {
            $.ajax({
                url: "{{url_for('mainpage.collect')}}",
                type: "POST",
                data: {
                    game_id: game_id
                },
                success: function(data){
                    if(data== "collectSuccess"){
                        $("#collectButton").text("âœ”");
                    }
                    else if(data=='cancelSuccess'){
                        $("#collectButton").text("ğŸ˜˜");
                    }
                    else{
                        alert("æ”¶è—å¤±è´¥");
                    }
                },
                error: function(data){
                    alert("æ”¶è—å¤±è´¥");
                }
            });
        }
        //button id="collectButton"
        //ajax send request to server
        //if success, change button text to "å·²æ”¶è—"
        //if fail, alert "æ”¶è—å¤±è´¥"
        //if already collected, alert "å·²æ”¶è—"


    </script>


    <!-- a div å ä½ -->
    <div id="takePlace"></div>
    <div id="sideBox">
        <div id="SB1">
            <p id="SBSelector1">æ ¹æ®å¹³å°ç­›é€‰</p>
            <!-- é€‰æ‹©åˆ—è¡¨ psp,ps4,xbox,pc... -->
            <ul id="SBSelectorList1">
                <li>
                    <a href="{{url_for('mainpage.mainpage')}}">&ensp;å…¨éƒ¨ &ensp;</a>
                </li>
                <li>
                    <a href="{{url_for('mainpage.mainpage',game_type='psp')}}">&ensp;PSP &ensp; </a>
                </li>
                <li>
                    <a href="{{url_for('mainpage.mainpage',game_type='ps4')}}">&ensp;PS4 &ensp;</a>
                </li>
                <li>
                    <a href="{{url_for('mainpage.mainpage',game_type='xbox')}}">&ensp;XBOX &ensp;</a>
                </li>
                <li>
                    <a href="{{url_for('mainpage.mainpage',game_type='pc')}}">&ensp;PC &ensp;</a>
                </li>
            </ul>
        </div>

        



        <div id="SB3">
            <!-- æ ¹æ®å‘å¸ƒå¹´ä»½ç­›é€‰ -->
            <p id="SBSelector3">æ ¹æ®å‘å¸ƒå¹´ä»½ç­›é€‰</p>
            <ul id="SBSelectorList3">
                <li>
                    <a href="{{url_for('mainpage.mainpage')}}">&ensp;å…¨éƒ¨ &ensp;</a>
                </li>
                <li>
                    <a href="{{url_for('mainpage.mainpage',game_year='2019')}}">&ensp;2019 &ensp;</a>
                </li>
                <li>
                    <a href="{{url_for('mainpage.mainpage',game_year='2018')}}">&ensp;2018 &ensp;</a>
                </li>
                <li>
                    <a href="{{url_for('mainpage.mainpage',game_year='2017')}}">&ensp;2017 &ensp;</a>
                </li>
                <li>
                    <a href="{{url_for('mainpage.mainpage',game_year='2016')}}">&ensp;2016 &ensp;</a>
                </li>
                <li>
                    <a href="{{url_for('mainpage.mainpage',game_year='2015')}}">&ensp;2015 &ensp;</a>
                </li>
                <li>
                    <a href="{{url_for('mainpage.mainpage',game_year='2014')}}">&ensp;2014 &ensp;</a>
                </li>
                <li>
                    <a href="{{url_for('mainpage.mainpage',game_year='2013')}}">&ensp;2013 &ensp;</a>
                </li>
                <li>
                    <a href="{{url_for('mainpage.mainpage',game_year='2012')}}">&ensp;2012 &ensp;</a>
                </li>
                <li>
                    <a href="{{url_for('mainpage.mainpage',game_year='2011')}}">&ensp;2011 &ensp;</a>
                </li>
                <li>
                    <a href="{{url_for('mainpage.mainpage',game_year='2010')}}">&ensp;2010 &ensp;</a>
                </li>
            </ul>
        </div>
    </div>
</div>



{% endblock %}